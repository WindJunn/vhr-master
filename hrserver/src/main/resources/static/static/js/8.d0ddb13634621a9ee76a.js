webpackJsonp([8],{Mxlx:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={computed:{users:function(){return this.$store.state.user}},data:function(){return{emps:[],hrs:[],keywords:"",faangledoubleup:"fa-angle-double-up",faangledoubledown:"fa-angle-double-down",dialogTitle:"",multipleSelection:[],depTextColor:"#c0c4cc",nations:[],politics:[],positions:[],joblevels:[],totalCount:-1,currentPage:1,deps:[],roles:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},tableLoading:!1,advanceSearchViewVisible:!1,showOrHidePop:!1,showOrHidePop2:!1,hr:{id:"",name:"",phone:"",gender:"",address:"",departmentId:"",enabled:"",username:"",password:"",userface:"",idCard:"",remark:"",birthday:"",nationId:"",email:"",departmentName:"所属部门..."},user:{id:"",name:"",phone:"",gender:"",address:"",departmentId:"",enabled:"",username:"",password:"",userface:"",idCard:"",remark:"",birthday:"",nationId:"",email:""},rules:{name:[{required:!0,message:"必填:姓名",trigger:"blur"}],gender:[{required:!0,message:"必填:性别",trigger:"blur"}],birthday:[{required:!0,message:"必填:出生日期",trigger:"blur"}],idCard:[{required:!0,message:"必填:身份证号码",trigger:"blur"},{pattern:/(^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2}$)/,message:"身份证号码格式不正确",trigger:"blur"}],phone:[{required:!0,message:"必填:电话号码",trigger:"blur"}],address:[{required:!0,message:"必填:联系地址",trigger:"blur"}]}}},mounted:function(){this.initData(),this.loadEmps()},methods:{handleSelectionChange:function(e){this.multipleSelection=e},keywordsChange:function(e){""==e&&this.loadEmps()},currentChange:function(e){this.currentPage=e,this.loadEmps()},loadEmps:function(){var e=this,t=this;this.getRequest("/system/hr/name/"+this.users.username).then(function(r){if(e.tableLoading=!1,r&&200==r.status){var s=r.data;t.hr=s,t.roles=data.roles,t.nation=data.nation,console.log(data)}})},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},showDepTree2:function(){this.showOrHidePop2=!this.showOrHidePop2},initData:function(){var e=this;this.getRequest("/system/hr/basicdata").then(function(t){if(t&&200==t.status){var r=t.data;e.nations=r.nations,e.politics=r.politics,e.deps=r.deps,e.positions=r.positions,e.roles=r.roles}})},updatePer:function(){this.user.id=this.users.id,this.user.name=this.hr.name,this.user.gender=this.hr.gender,this.user.phone=this.hr.phone,this.user.address=this.hr.address,this.user.enabled=!0,this.user.idCard=this.hr.idCard,this.user.email=this.hr.email,this.user.birthday=this.hr.birthday,this.user.nationId=this.hr.nationId,this.putRequest("/system/hr/",this.user).then(function(e){if(e&&200==e.status){e.data;_this.loadEmps()}})},showEditEmpView:function(e){console.log(e),this.dialogTitle="编辑管理员",this.hr=e,this.hr.birthday=this.formatDate(e.birthday),this.hr.nationId=e.nation.id,this.hr.departmentId=e.department.id,this.hr.departmentName=e.department.name,this.dialogVisible=!0,this.user.id=e.id,this.user.name=this.hr.name,this.user.gender=this.hr.gender,this.user.phone=this.hr.phone,this.user.address=this.hr.address,this.user.departmentId=this.hr.departmentId,this.user.departmentName=this.hr.departmentName,this.user.enabled=this.hr.enabled,this.user.idCard=this.hr.idCard,this.user.email=this.hr.email,this.user.birthday=this.hr.birthday,this.user.nationId=this.hr.nationId},emptyEmpData:function(){this.hr={id:"",name:"",phone:"",gender:"",address:"",departmentId:"",enabled:!0,username:phone,password:123,userface:"",idCard:"",remark:"",birthday:"",nationId:"",email:"",departmentName:"所属部门..."},this.user={name:"",phone:"",gender:"",address:"",departmentId:"",username:"",password:"",userface:"",idCard:"",remark:"",birthday:"",nationId:"",email:"",departmentName:"所属部门..."}}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-container",[r("el-header",{staticStyle:{height:"20px"}}),e._v(" "),r("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.hr,rules:e.rules,"label-width":"100px"}},[r("el-row",[r("el-col",{staticStyle:{width:"40%"}},[r("div",[r("el-form-item",{attrs:{label:"姓名:",prop:"name"}},[r("el-input",{staticStyle:{width:"70%"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入管理员姓名"},model:{value:e.hr.name,callback:function(t){e.$set(e.hr,"name",t)},expression:"hr.name"}})],1)],1)])],1),e._v(" "),r("el-row",[r("el-col",{staticStyle:{width:"40%"}},[r("div",[r("el-form-item",{attrs:{label:"性别:",prop:"gender"}},[r("el-radio-group",{model:{value:e.hr.gender,callback:function(t){e.$set(e.hr,"gender",t)},expression:"hr.gender"}},[r("el-radio",{attrs:{label:"男"}},[e._v("男")]),e._v(" "),r("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"女"}},[e._v("女")])],1)],1)],1)])],1),e._v(" "),r("el-row",[r("el-col",{staticStyle:{width:"40%"}},[r("div",[r("el-form-item",{attrs:{label:"出生日期:",prop:"birthday"}},[r("el-date-picker",{staticStyle:{width:"70%"},attrs:{size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"出生日期"},model:{value:e.hr.birthday,callback:function(t){e.$set(e.hr,"birthday",t)},expression:"hr.birthday"}})],1)],1)])],1),e._v(" "),r("el-row",[r("el-col",{staticStyle:{width:"40%"}},[r("div",[r("el-form-item",{attrs:{label:"民族:",prop:"nationId"}},[r("el-select",{staticStyle:{width:"70%"},attrs:{size:"mini",placeholder:"请选择民族"},model:{value:e.hr.nationId,callback:function(t){e.$set(e.hr,"nationId",t)},expression:"hr.nationId"}},e._l(e.nations,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)])],1),e._v(" "),r("el-row",[r("el-col",{staticStyle:{width:"40%"}},[r("div",[r("el-form-item",{attrs:{label:"联系地址:",prop:"address"}},[r("el-input",{staticStyle:{width:"70%"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"联系地址..."},model:{value:e.hr.address,callback:function(t){e.$set(e.hr,"address",t)},expression:"hr.address"}})],1)],1)])],1),e._v(" "),r("el-row",[r("el-col",{staticStyle:{width:"40%"}},[r("div",[r("el-form-item",{attrs:{label:"所属部门:",prop:"departmentId"}},[r("el-popover",{attrs:{placement:"right",title:"请选择部门",trigger:"manual",disabled:""},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[r("el-tree",{attrs:{data:e.deps,"default-expand-all":!1,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),r("div",{staticStyle:{width:"70%",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return"button"in t||!e._k(t.keyCode,"left",37,t.key)?"button"in t&&0!==t.button?null:void e.showDepTree(t):null}},slot:"reference"},[e._v(e._s(e.hr.department.name))])],1)],1)],1)])],1),e._v(" "),r("el-row",[r("el-col",{staticStyle:{width:"40%"}},[r("div",[r("el-form-item",{attrs:{label:"电话号码:",prop:"phone"}},[r("el-input",{staticStyle:{width:"70%"},attrs:{"prefix-icon":"el-icon-phone",size:"mini",placeholder:"电话号码..."},model:{value:e.hr.phone,callback:function(t){e.$set(e.hr,"phone",t)},expression:"hr.phone"}})],1)],1)])],1),e._v(" "),r("el-row",[r("el-col",{staticStyle:{width:"40%"}},[r("div",[r("el-form-item",{attrs:{label:"身份证号码:",prop:"idCard"}},[r("el-input",{staticStyle:{width:"70%"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入员工身份证号码..."},model:{value:e.hr.idCard,callback:function(t){e.$set(e.hr,"idCard",t)},expression:"hr.idCard"}})],1)],1)])],1),e._v(" "),r("el-row",[r("el-col",{staticStyle:{width:"40%"}},[r("div",[r("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[r("el-input",{staticStyle:{width:"70%"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入邮箱..."},model:{value:e.hr.email,callback:function(t){e.$set(e.hr,"email",t)},expression:"hr.email"}})],1)],1)])],1),e._v(" "),r("el-form-item",{staticStyle:{width:"30%"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updatePer("ruleForm")}}},[e._v("确认修改")])],1)],1)],1)],1)],1)},staticRenderFns:[]},a=r("VU/8")(s,i,!1,null,null,null);t.default=a.exports},QOZc:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={computed:{users:function(){return this.$store.state.user}},data:function(){var e=this;return{ruleForm:{pass:"",checkPass:""},rules:{pass:[{validator:function(t,r,s){""===r?s(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),s())},trigger:"blur"}],checkPass:[{validator:function(t,r,s){""===r?s(new Error("请再次输入密码")):r!==e.ruleForm.pass?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}]}}},methods:{updatePassword:function(){var e=this;this.postRequest("/system/hr/updateps?username="+this.users.username+"&password="+this.ruleForm.pass).then(function(t){t&&200==t.status&&e.$refs.ruleForm.resetFields()})},submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")})},resetForm:function(e){this.$refs[e].resetFields()}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}}),e._v(" "),r("div",{staticStyle:{width:"40%"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"登陆账号"}},[r("el-input",{attrs:{type:"username",disabled:""},model:{value:e.users.username,callback:function(t){e.$set(e.users,"username",t)},expression:"users.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"新密码",prop:"pass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认新密码",prop:"checkPass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updatePassword("ruleForm")}}},[e._v("确认修改")]),e._v(" "),r("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]},a=r("VU/8")(s,i,!1,null,null,null);t.default=a.exports},uTOD:function(e,t,r){var s={"./OneName.vue":"QOZc","./OneSelf.vue":"Mxlx"};function i(e){return r(a(e))}function a(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function(){return Object.keys(s)},i.resolve=a,e.exports=i,i.id="uTOD"}});
//# sourceMappingURL=8.d0ddb13634621a9ee76a.js.map